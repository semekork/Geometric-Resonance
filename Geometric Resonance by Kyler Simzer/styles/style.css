
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400&family=Space+Mono:wght@400&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; background: #020204; font-family: 'Playfair Display', serif; }
    #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; }

    #ui {
      position: fixed; bottom: 0; left: 0; right: 0; z-index: 10;
      display: flex; flex-direction: column; align-items: center;
      padding: 20px; gap: 16px;
      opacity: 1; transition: opacity 0.6s, transform 0.6s;
    }
    #ui.hidden { opacity: 0; pointer-events: none; transform: translateY(20px); }

    .tabs {
      display: flex; gap: 4px; background: rgba(0,0,0,0.85);
      padding: 4px; border-radius: 28px; backdrop-filter: blur(24px);
      border: 1px solid rgba(255,255,255,0.05);
      box-shadow: 0 8px 32px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
    }
    .tab {
      padding: 10px 18px; border: none; background: transparent;
      color: rgba(255,255,255,0.35); font-family: 'Space Mono', monospace;
      font-size: 9px; font-weight: 400; letter-spacing: 0.18em;
      text-transform: uppercase; cursor: pointer; border-radius: 24px; transition: all 0.3s;
    }
    .tab:hover { color: rgba(255,255,255,0.7); }
    .tab.active { background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06)); color: rgba(255,255,255,0.95); }

    .settings-container { position: relative; width: 100%; max-width: 1100px; }
    .settings-panel {
      display: none; gap: 20px; padding: 24px 28px;
      background: rgba(0,0,0,0.88); border: 1px solid rgba(255,255,255,0.06);
      border-radius: 20px; backdrop-filter: blur(40px);
      justify-content: center; flex-wrap: wrap;
      box-shadow: 0 12px 48px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.04);
    }
    .settings-panel.active { display: flex; }

    .setting { display: flex; flex-direction: column; gap: 10px; align-items: center; min-width: 100px; }
    .setting-label {
      font-family: 'Space Mono', monospace; font-size: 8px; font-weight: 400;
      letter-spacing: 0.22em; text-transform: uppercase; color: rgba(255,255,255,0.30);
      text-align: center;
    }

    .controls { display: flex; gap: 12px; align-items: center; }
    .btn {
      width: 52px; height: 52px; border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.10); background: rgba(255,255,255,0.02);
      color: rgba(255,255,255,0.55); cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.3s; backdrop-filter: blur(20px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
    }
    .btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.25); transform: scale(1.08); }
    .btn:active { transform: scale(0.95); }
    .btn svg { width: 18px; height: 18px; stroke: currentColor; stroke-width: 1.5; fill: none; }
    .btn.primary { width: 68px; height: 68px; border-color: rgba(255,255,255,0.15); background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); }
    .btn.primary svg { width: 24px; height: 24px; }
    .file-input { position: absolute; opacity: 0; width: 52px; height: 52px; cursor: pointer; }

    input[type="range"] {
      -webkit-appearance: none; width: 100px; height: 2px;
      background: linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.15));
      border-radius: 2px; cursor: pointer;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 14px; height: 14px; border-radius: 50%;
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.75));
      border: none; transition: transform 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.25); }

    select {
      background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
      border-radius: 8px; padding: 8px 12px; color: rgba(255,255,255,0.75);
      font-family: 'Playfair Display', serif; font-size: 13px; cursor: pointer; outline: none;
    }
    select:hover { border-color: rgba(255,255,255,0.18); }
    select option { background: #0a0a0c; color: #fff; }

    .toggle {
      width: 44px; height: 24px; background: rgba(255,255,255,0.08);
      border-radius: 12px; cursor: pointer; position: relative; transition: background 0.3s;
    }
    .toggle.active { background: linear-gradient(135deg, rgba(255,255,255,0.35), rgba(255,255,255,0.20)); }
    .toggle::after {
      content: ''; position: absolute; width: 18px; height: 18px;
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.80));
      border-radius: 50%; top: 3px; left: 3px; transition: transform 0.3s;
    }
    .toggle.active::after { transform: translateX(20px); }

    #status {
      position: fixed; top: 28px; right: 28px;
      display: flex; flex-direction: column; align-items: flex-end; gap: 6px;
      font-family: 'Space Mono', monospace; font-size: 9px;
      font-weight: 400; color: rgba(255,255,255,0.25); z-index: 11;
    }
    #bpm-display { font-size: 22px; font-family: 'Playfair Display', serif; font-weight: 300; color: rgba(255,255,255,0.12); letter-spacing: 0.12em; }
    #rec-indicator { display: flex; align-items: center; gap: 8px; color: rgba(255,100,100,0.85); opacity: 0; transition: opacity 0.3s; }
    #rec-indicator.active { opacity: 1; }
    #rec-indicator::before { content: ''; width: 8px; height: 8px; border-radius: 50%; background: currentColor; animation: pulse 1s ease-in-out infinite; }

    .hint { font-family: 'Space Mono', monospace; font-size: 8px; font-weight: 400; letter-spacing: 0.14em; color: rgba(255,255,255,0.12); }

    #preset-modal {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.96); border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px; padding: 28px; z-index: 200; display: none;
      backdrop-filter: blur(40px); min-width: 320px;
    }

    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
  